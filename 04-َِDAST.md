

## 🔍 DAST چیست؟

**DAST** 

مخفف **Dynamic Application Security Testing** هست.
به فارسی: «آزمون امنیتی پویا برای اپلیکیشن‌ها».

### 📌 تعریف ساده:

> DAST
یعنی بررسی امنیتی **اپلیکیشن در حال اجرا** (نه کد منبع)، با شبیه‌سازی حملات واقعی از بیرون.

---

## 🧠 چطور کار می‌کنه؟

* اپلیکیشن اجرا می‌شه (مثلاً یه وب‌سایت روی پورت 3000)
* ابزار DAST مثل یه هکر **از بیرون** باهاش تعامل می‌کنه:

  * فرم‌ها رو پر می‌کنه
  * لینک‌ها رو دنبال می‌کنه
  * ورودی‌های مشکوک می‌فرسته
* دنبال آسیب‌پذیری‌هایی مثل:

  * SQL Injection
  * XSS (Cross-site Scripting)
  * CSRF
  * Broken Authentication
  * و غیره...

---

## 🛠️ ابزارهای معروف DAST

| ابزار                | توضیح                                                    |
| -------------------- | -------------------------------------------------------- |
| **OWASP ZAP**        | رایگان و متن‌باز، از بهترین‌ها برای اسکن امنیتی وب‌اپ‌ها |
| **Burp Suite (Pro)** | خیلی قوی، نسخه رایگان هم داره ولی نسخه Pro حرفه‌ای‌تره   |
| **Nikto**            | اسکنر ساده برای سرورها و وب‌سرورها                       |
| **Acunetix**         | تجاری، دقیق و قابل استفاده در DevSecOps                  |
| **Netsparker**       | ابزار تجاری دیگر با دقت بالا                             |

---

## 🔬 تفاوت DAST با SAST

| ویژگی                   | SAST               | DAST                  |
| ----------------------- | ------------------ | --------------------- |
| بررسی روی...            | کد منبع            | اپلیکیشن در حال اجرا  |
| نیاز به دسترسی به سورس؟ | بله                | نه                    |
| زمان اجرا               | قبل از اجرا        | در زمان اجرا          |
| مثال                    | SonarQube, Fortify | OWASP ZAP, Burp Suite |

---

## 📈 مزایا و معایب

### ✅ مزایا:

* نیازی به سورس کد نداره
* حملات واقعی رو شبیه‌سازی می‌کنه
* قابل اجرا روی هر اپ زنده (حتی بلک‌باکس)

### ❌ معایب:

* ممکنه اسکن طولانی بشه
* همه آسیب‌پذیری‌ها رو نمی‌تونه پیدا کنه
* معمولاً پس از دیپلوی قابل اجراست (نه در مراحل اولیه توسعه)

---



عالی! بیایید با هم **OWASP ZAP** رو برای انجام یک اسکن DAST روی Juice Shop راه‌اندازی کنیم. خیلی کار مفیدی برای یادگیری تست امنیتی اپلیکیشن‌هاست.

---

## 🎯 هدف:

اسکن امنیتی **اپلیکیشن Juice Shop** که روی پورت `3000` در حال اجراست، با استفاده از **OWASP ZAP** (داخلی یا داکر).

---

## 🛠️ مرحله 1: اجرای Juice Shop

اگر هنوز Juice Shop رو اجرا نکردی، با این دستور بالا بیار:

```bash
docker run --rm -p 3000:3000 bkimminich/juice-shop
```

صبر کن تا پیام `Listening on port 3000` رو ببینی، بعد ادامه بده.

---

## 🧪 مرحله 2: اجرای OWASP ZAP

### روش ۱: نصب دسکتاپ ZAP (GUI)

اگر ZAP GUI رو روی سیستم‌ت داری:

1. بازش کن.
2. در قسمت “Quick Start” > گزینه "Automated Scan" رو انتخاب کن.
3. در قسمت Target URL بنویس:

```
http://localhost:3000
```

4. Start رو بزن — ZAP شروع می‌کنه به crawl و fuzz کردن اپ.

---

### روش ۲: اجرای ZAP داخل Docker (بدون نیاز به GUI)

اگر ZAP نصب نداری یا می‌خوای فقط از CLI استفاده کنی:

```bash
docker run -u zap -p 8080:8080 -i owasp/zap2docker-stable zap-baseline.py -t http://host.docker.internal:3000
```

📌 نکته: `host.docker.internal` توی سیستم‌های ویندوز/مک برای دسترسی به هاست استفاده می‌شه. اگه لینوکسی، از IP محلی خودت استفاده کن مثل:

```bash
docker run -u zap -i owasp/zap2docker-stable zap-baseline.py -t http://192.168.1.100:3000
```

---

## 📝 مرحله 3: بررسی گزارش

بعد از اتمام اسکن (چند دقیقه طول می‌کشه)، گزارش‌هایی مثل این می‌بینی:

* 🔴 XSS (Cross-site scripting)
* 🔴 SQL Injection
* 🟡 Cookie بدون Flag امن
* 🟡 عدم وجود Headerهای امنیتی مثل `X-Content-Type-Options`

---

## 🧾 مرحله 4: خروجی گرفتن (اختیاری)

برای خروجی گرفتن به HTML:

```bash
 docker run -u zap -v $(pwd):/zap/wrk/:rw -i ghcr.io/zaproxy/zaproxy:stable  zap-baseline.py -t http://192.168.72.60:3000 -r juice-shop-report.html
```

فایل `juice-shop-report.html` توی فولدری که دستور رو اجرا کردی ذخیره می‌شه.

---

## 💡 نکات اضافی:

* اگر اسکن دقیق‌تر بخوای، می‌تونی از `zap-full-scan.py` استفاده کنی.
* برای استفاده در CI/CD می‌شه ZAP رو با اسکریپت خودکار اجرا کرد.

---
