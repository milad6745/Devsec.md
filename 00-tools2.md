


این تصویر، یک **نقشه معماری DevSecOps** یا به‌عبارت دیگر یک **نمودار جریان امنیت در چرخه DevOps** است که نشان می‌دهد چگونه امنیت (Security) به‌صورت **یکپارچه و مداوم** در تمام مراحل توسعه، تست، استقرار و پایش نرم‌افزار وارد می‌شود. در اینجا مهم‌ترین اجزای نمودار رو مرحله‌به‌مرحله بررسی می‌کنم:

---

### 🔷 1. **SAST (تحلیل ایستای کد)**

* در مرحله **Develop** (کدنویسی) و **Test** استفاده می‌شود.
* ابزارهایی مثل **SonarQube** یا **Semgrep** کد را قبل از اجرای واقعی بررسی می‌کنند.
* هدف: کشف باگ‌ها و آسیب‌پذیری‌ها در منبع کد.

---

### 🔷 2. **Develop → Build**

* کد توسعه‌یافته وارد مرحله Build می‌شود که معمولاً شامل کامپایل، ساخت پکیج یا ایمیج Docker است.

---

### 🔷 3. **Container Security**

* در این مرحله امنیت کانتینر (مثل بررسی آسیب‌پذیری‌ها در ایمیج‌ها) چک می‌شود.
* ابزار: **Trivy**, **Clair**, **Dockle**

---

### 🔷 4. **Policy as Code**

* سیاست‌های امنیتی به‌شکل کد (مثلاً با Rego / OPA) تعریف شده و در چند مرحله (قبل از تست، مانیتورینگ و ... ) اعمال می‌شود.
* کاربرد: مجوزدهی، کنترل دسترسی، بررسی قوانین امنیتی روی IaC و CI/CD

---

### 🔷 5. **Test**

* در این مرحله علاوه بر تست‌های عملکردی، تست‌های امنیتی هم انجام می‌شود.
* شامل تحلیل‌های **SAST**، **DAST**، بررسی ورودی‌ها، و تست خودکار آسیب‌پذیری.

---

### 🔷 6. **DAST (تحلیل پویا)**

* برخلاف SAST، این تحلیل روی اپلیکیشن در حال اجرا انجام می‌شود (مثلاً با OWASP ZAP یا Burp Suite).
* هدف: شناسایی آسیب‌پذیری‌هایی که فقط در زمان اجرا قابل مشاهده‌اند.

---

### 🔷 7. **Deploy**

* استقرار نهایی سرویس انجام می‌شود.
* در این مرحله، امنیت مسیر ورودی (Ingress Security) مثل firewall، TLS/mTLS و کنترل API در نظر گرفته می‌شود.

---

### 🔷 8. **Ingress Security**

* شامل ابزارهایی مثل **Istio** (برای کنترل ترافیک و سیاست‌های ارتباط سرویس‌ها) یا **NGINX + ModSecurity** برای API Gatewayهاست.

---

### 🔷 9. **Monitor**

* فاز نهایی، که در آن لاگ‌برداری، مانیتورینگ و پاسخ به رخدادها انجام می‌شود.
* ابزار: **Prometheus**, **Falco**, **Wazuh**, **ELK Stack**

---

### 📌 نکته مهم:

خطوط نقطه‌چین نشان‌دهنده تعامل‌های امنیتی "در پشت صحنه" هستند — مثل اعمال سیاست‌ها یا اسکن‌های دوره‌ای — که ممکنه در ظاهر دیده نشن ولی بخش حیاتی DevSecOps هستن.

---

اگه بخوای، می‌تونم این نقشه رو برای یک پروژه خاص (مثلاً وب اپلیکیشن یا API یا حتی پروژه K8s-based) سفارشی‌سازی کنم.
